<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Shopping list</title>
	</head>
	<body>
		<h1>What to buy</h1>
		<p title="a gentle reminder">Don't forget to buy this stuff.</p>
		<!--
			没有title属性，弹窗将会显示null.
        -->
		<p>This is just a test</p>
		<ul id="purchases">
			<li>A tin of beans</li>
			<li class = "sale">Cheese</li>
			<li class = "sale important">Milk</li>
		</ul>
	    <script>
	    		/*
	    		//p38 3.4.5.1 getElementById
	    		//这个方法将返回一个与那个有这给定id属性值的元素节点对应的对象
	    		alert(typeof document.getElementById("purchases"));
	    		
	    		//p39 3.4.5.2 getElementsByTagName
	    		//getElementsByTagName方法返回一个对象数组，每个对象对应着文档里有着给定标签的一个元素。
	    		alert(document.getElementsByTagName("li").length);
	    		//每个数组里的元素都是一个对象
	    		for (var i = 0; i < document.getElementsByTagName("li").length;i++)
	    		alert(typeof document.getElementsByTagName("li")[i]);
	    		//把document.getElementsByTagName("li")赋值给变量items
	    		var items = document.getElementsByTagName("li")
	    		for(var i = 0; i < items.length; i++)
	    			alert(typeof items[i]);
	    			
	    		//getElementsByTagName允许把一个通配符（“*”）作为他的参数，
	    		//而这意味着文档里的每个元素都将在这个函数返回的数组里占有一席之地。
	    		
	    		//本文档里所有的元素节点
	    		alert(document.getElementsByTagName("*").length);
	    		//
	    		var shopping = document.getElementById("purchases");
	    		var items = shopping.getElementsByTagName("*");
	    		alert(items.length);
	    		for(var i = 0; i < items.length; i++)
	    			alert(typeof items[i]);
	    			
	    		//p41 3.4.5.3 getElementByClassName
	    		//通过class属性中的类名来访问元素
	    		//不仅类名的实际顺序不重要，就算元素还带有更多类名也没关系。
	    		alert(document.getElementsByClassName("important sale ").length);
	    		//位于“purchases”列表中的带有“sale”类的元素。
	    		var shopping = document.getElementById("purchases");
	    		var sales = shopping.getElementsByClassName("sale");
	    		alert(sales.length);
			//不适用getElementsByClassName方法的旧浏览器使用函数实现此方法的功能
			function getElementsByClassName(node,classname)
			{
				if (node.getElementsByClassName){
					//使用现有方法
					return node.getElementsByClassName(classname);
				}
				else{
					var results = new Array();
					var elems = node.getElementsByTagName("*");
					for(var i = 0; i <elems.length; i++){
						if(elems[i].className.indexOf(classname) != -1){
							results[results.length] = elems[i];
						}
					}
					return results;
				}
			}
			var shopping = document.getElementById("purchases");
			var sales = getElementsByClassName(shopping,"sale")
			alert(sales.length);
    			
	    		//3.5.1 getAttribute
	    		//getAttribute是一个函数。它只有一个参数——你打算查询的属性的名字。
	    		var paras = document.getElementsByTagName("p");
	    		for(var i = 0; i < paras.length; i++)
	    			alert(paras[i].getAttribute("title"));
//修改脚本，让它只有title属性有值时才弹出消息。
var paras = document.getElementsByTagName("p");
for(var i = 0; i < paras.length; i++){
	var title_text = paras[i].getAttribute("title");
	if (title_text != null){
		alert(title_text);
	}
}
	    		//3.5.2 setAttribute
	    		//它允许我们对属性节点的值做出修改。
	    		//与getAttribute一样,setAttribute也只能用于节点元素
	    		//object.setAttributte(attribute,value)
	    		//改变title的值
	    		var shopping = document.getElementById("purchases");
	    		alert(shopping.getAttribute("title"));
	    		shopping.setAttribute("title","a list of goods");
	    		alert(shopping.getAttribute("title"));
	    		//改变<p>元素中已经有的title的值
	    		var paras = document.getElementsByTagName("p");
	    		for(var i = 0; i < paras.length; i++){
	    			var title_text = paras[i].getAttribute("title");
	    			if (title_text){
	    				paras[i].setAttribute("title","brand new title text");
	    				alert(paras[i].getAttribute("title"));
    				}
	    		}
	    		alert(document.getElementsByTagName("*").length);
			var shopping = document.getElementById("purchases");
			alert(shopping.getAttribute("title"));
			shopping.setAttribute("title","reminder");
			alert(shopping.getAttribute("title"));*/
			var paras = document.getElementsByTagName("p");
			for (var i=0; i <paras.length; i++){
				var title_text = paras[i].getAttribute("title");
				if(title_text)
				{
					paras[i].setAttribute("title","brand new title text");
					alert(paras[i].getAttribute("title"));
				}
			}
	    </script>
	</body>
	<!--
	<style type="text/css">
		body{
			color:white;
			background: black;
		}
		#purchases{
			border:1px solid white;
			background-color: #333;
			padding: 1em;
		}
		#purchases li{
			font-weight: bold;
		}
	</style>
    -->
</html>



